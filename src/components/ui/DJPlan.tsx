'use client' import { useState, useEffect } from 'react' import { motion, AnimatePresence } from 'framer-motion' import { GlassContainer } from './GlassContainer' import Badge from './badge' import { Button } from './button' import { ProgressBar } from './ProgressBar' import { DJRoadmap } from './DJRoadmap' import { EmailTemplateBlock } from './EmailTemplateBlock' import { AIProfileAnalysis } from './AIProfileAnalysis' import { PresskitBuilder } from './PresskitBuilder' import { ContactFinderTool } from './ContactFinderTool' import { Modal } from './Modal' import { supabase } from '@/lib/supabase' import { CheckCircle, Circle, Star, Trophy, Target, Calendar, MapPin, Zap, Award, TrendingUp, Mail, Brain, FileText, Users, Camera, Music, Wrench } from 'lucide-react' interface DJPlanMission { id: string title: string description: string day: number week: number difficulty: 'easy' | 'medium' | 'hard' category: 'technical' | 'marketing' | 'networking' | 'performance' | 'business' xp: number completed: boolean completedAt?: Date tool?: 'email-template' | 'ai-profile-analysis' | 'presskit-builder' | 'contact-finder' toolData?: any } interface DJPlanProps { djLevel: string userId?: string } const levelConfig = { beginner: { title: 'Beginner DJ', color: 'from-green-500 to-emerald-600', icon: 'ðŸŽ§', description: 'Starting your DJ journey' }, intermediate: { title: 'Intermediate DJ', color: 'from-blue-500 to-cyan-600', icon: 'ðŸŽµ', description: 'Building your skills' }, advanced: { title: 'Advanced DJ', color: 'from-purple-500 to-violet-600', icon: 'ðŸŽ¤', description: 'Mastering your craft' }, professional: { title: 'Professional DJ', color: 'from-orange-500 to-red-600', icon: 'ðŸ”¥', description: 'Industry professional' } } const categoryIcons = { technical: <Zap className="w-4 h-4"/>, marketing: <TrendingUp className="w-4 h-4"/>, networking: <MapPin className="w-4 h-4"/>, performance: <Star className="w-4 h-4"/>, business: <Trophy className="w-4 h-4"/> } const categoryColors = { technical: 'bg-blue-100 text-blue-800', marketing: 'bg-green-100 text-green-800', networking: 'bg-purple-100 text-purple-800', performance: 'bg-orange-100 text-orange-800', business: 'bg-red-100 text-red-800' } export function DJPlan({ djLevel, userId }: DJPlanProps) { const [missions, setMissions] = useState<DJPlanMission[]>([]) const [completedMissions, setCompletedMissions] = useState<Set<string>>(new Set()) const [currentWeek, setCurrentWeek] = useState(1) const [totalXP, setTotalXP] = useState(0) const [loading, setLoading] = useState(true) const [selectedTool, setSelectedTool] = useState<{ type: 'email-template' | 'ai-profile-analysis' | 'presskit-builder' | 'contact-finder' mission: DJPlanMission } | null>(null) const levelInfo = levelConfig[djLevel as keyof typeof levelConfig] || levelConfig.beginner useEffect(() => { generateMissions() loadProgress() }, [djLevel, userId]) const generateMissions = () => { const missionTemplates = { beginner: [ { title: 'Set up your DJ workspace', description: 'Organize your equipment and create a dedicated mixing space', category: 'technical', difficulty: 'easy', xp: 50 }, { title: 'Learn basic beatmatching', description: 'Practice matching BPMs between two tracks', category: 'technical', difficulty: 'medium', xp: 100 }, { title: 'Create your first mix', description: 'Record a 30-minute mix with smooth transitions', category: 'performance', difficulty: 'medium', xp: 150 }, { title: 'Study your favorite DJs', description: 'Analyze techniques from 3 professional DJs', category: 'technical', difficulty: 'easy', xp: 75 }, { title: 'Build your music library', description: 'Collect 100 high-quality tracks across different genres', category: 'technical', difficulty: 'medium', xp: 100 }, { title: 'Practice EQ techniques', description: 'Master high, mid, and low frequency control', category: 'technical', difficulty: 'medium', xp: 125 }, { title: 'Learn basic scratching', description: 'Practice baby scratch and forward scratch techniques', category: 'technical', difficulty: 'hard', xp: 200 }, { title: 'Create social media accounts', description: 'Set up Instagram, TikTok, and SoundCloud profiles', category: 'marketing', difficulty: 'easy', xp: 50, tool: 'ai-profile-analysis' }, { title: 'Post your first mix online', description: 'Share your mix on SoundCloud with proper tags', category: 'marketing', difficulty: 'medium', xp: 100 }, { title: 'Connect with local DJs', description: 'Find and follow 10 DJs in your area', category: 'networking', difficulty: 'easy', xp: 75, tool: 'contact-finder' }, { title: 'Attend a local DJ event', description: 'Go to a club or event to study live performances', category: 'networking', difficulty: 'medium', xp: 100 }, { title: 'Practice reading the crowd', description: 'Learn to adapt your music to different audiences', category: 'performance', difficulty: 'hard', xp: 150 }, { title: 'Master transition techniques', description: 'Learn cut, fade, and filter transitions', category: 'technical', difficulty: 'medium', xp: 125 }, { title: 'Create a DJ alias', description: 'Choose and establish your professional DJ name', category: 'marketing', difficulty: 'easy', xp: 50 }, { title: 'Learn music theory basics', description: 'Understand keys, scales, and harmonic mixing', category: 'technical', difficulty: 'medium', xp: 100 }, { title: 'Practice with different genres', description: 'Mix house, techno, hip-hop, and other styles', category: 'performance', difficulty: 'medium', xp: 125 }, { title: 'Record practice sessions', description: 'Document your progress with weekly recordings', category: 'performance', difficulty: 'easy', xp: 75 }, { title: 'Learn about DJ equipment', description: 'Research mixers, controllers, and CDJs', category: 'technical', difficulty: 'easy', xp: 50 }, { title: 'Practice beatmatching by ear', description: 'Mix without looking at BPM displays', category: 'technical', difficulty: 'hard', xp: 200 }, { title: 'Create your first playlist', description: 'Curate a 2-hour set with perfect flow', category: 'performance', difficulty: 'medium', xp: 100 }, { title: 'Learn about music licensing', description: 'Understand copyright and performance rights', category: 'business', difficulty: 'easy', xp: 75 }, { title: 'Practice crowd interaction', description: 'Learn to engage with your audience', category: 'performance', difficulty: 'medium', xp: 100 }, { title: 'Master volume control', description: 'Learn proper gain staging and levels', category: 'technical', difficulty: 'medium', xp: 100 }, { title: 'Create a practice schedule', description: 'Establish consistent daily practice routine', category: 'business', difficulty: 'easy', xp: 50 }, { title: 'Learn about club sound systems', description: 'Understand how to adapt to different venues', category: 'technical', difficulty: 'medium', xp: 100 }, { title: 'Practice with headphones', description: 'Master cueing and monitoring techniques', category: 'technical', difficulty: 'medium', xp: 100 }, { title: 'Study track structure', description: 'Learn intro, verse, chorus, and outro patterns', category: 'technical', difficulty: 'easy', xp: 75 }, { title: 'Create your brand identity', description: 'Design logo and visual style for your DJ persona', category: 'marketing', difficulty: 'medium', xp: 125, tool: 'presskit-builder' }, { title: 'Learn basic music production', description: 'Create simple edits and remixes', category: 'technical', difficulty: 'hard', xp: 200 }, { title: 'Perform for friends', description: 'Practice live performance with a small audience', category: 'performance', difficulty: 'medium', xp: 150 } ], intermediate: [ { title: 'Master advanced beatmatching', description: 'Perfect your timing with complex rhythms', category: 'technical', difficulty: 'medium', xp: 150 }, { title: 'Learn harmonic mixing', description: 'Mix tracks in compatible keys for smooth transitions', category: 'technical', difficulty: 'hard', xp: 200 }, { title: 'Create signature remixes', description: 'Produce 3 unique remixes of popular tracks', category: 'technical', difficulty: 'hard', xp: 250 }, { title: 'Build local network', description: 'Connect with venue owners and event promoters', category: 'networking', difficulty: 'medium', xp: 125, tool: 'contact-finder' }, { title: 'Get first paid gig', description: 'Book and perform your first professional set', category: 'business', difficulty: 'hard', xp: 300 }, { title: 'Master advanced scratching', description: 'Learn chirp, crab, and transform scratches', category: 'technical', difficulty: 'hard', xp: 250 }, { title: 'Create monthly mixes', description: 'Release consistent content to build following', category: 'marketing', difficulty: 'medium', xp: 150 }, { title: 'Learn controllerism', description: 'Master finger drumming and live remixing', category: 'technical', difficulty: 'hard', xp: 200 }, { title: 'Collaborate with other DJs', description: 'Create back-to-back sets with peers', category: 'networking', difficulty: 'medium', xp: 125 }, { title: 'Study crowd psychology', description: 'Learn advanced crowd reading techniques', category: 'performance', difficulty: 'medium', xp: 150 }, { title: 'Master effects and filters', description: 'Use reverb, delay, and filters creatively', category: 'technical', difficulty: 'medium', xp: 125 }, { title: 'Create video content', description: 'Produce mixing tutorials and behind-the-scenes', category: 'marketing', difficulty: 'medium', xp: 150 }, { title: 'Learn business basics', description: 'Understand contracts, rates, and negotiations', category: 'business', difficulty: 'medium', xp: 100 }, { title: 'Develop signature style', description: 'Create a unique sound that defines your brand', category: 'performance', difficulty: 'hard', xp: 200 }, { title: 'Master live looping', description: 'Create live remixes using loop rolls and samples', category: 'technical', difficulty: 'hard', xp: 250 }, { title: 'Build press kit', description: 'Create professional portfolio for bookings', category: 'marketing', difficulty: 'medium', xp: 125, tool: 'presskit-builder' }, { title: 'Learn venue acoustics', description: 'Adapt your sound to different room sizes', category: 'technical', difficulty: 'medium', xp: 150 }, { title: 'Create original tracks', description: 'Produce 2 original songs for your sets', category: 'technical', difficulty: 'hard', xp: 300 }, { title: 'Master quick mixing', description: 'Perfect rapid-fire transitions and cuts', category: 'technical', difficulty: 'hard', xp: 200 }, { title: 'Build residency network', description: 'Secure regular gigs at local venues', category: 'networking', difficulty: 'hard', xp: 250 }, { title: 'Learn advanced EQ techniques', description: 'Master surgical EQing and frequency isolation', category: 'technical', difficulty: 'medium', xp: 150 }, { title: 'Create brand partnerships', description: 'Collaborate with local businesses and brands', category: 'business', difficulty: 'medium', xp: 125 }, { title: 'Master microphone techniques', description: 'Learn to MC and interact with crowds', category: 'performance', difficulty: 'medium', xp: 150 }, { title: 'Study music trends', description: 'Stay ahead of emerging genres and artists', category: 'marketing', difficulty: 'easy', xp: 75 }, { title: 'Learn festival performance', description: 'Adapt your style for large outdoor events', category: 'performance', difficulty: 'hard', xp: 200 }, { title: 'Master CDJ techniques', description: 'Learn professional club standard equipment', category: 'technical', difficulty: 'medium', xp: 150 }, { title: 'Create podcast series', description: 'Launch regular podcast to build audience', category: 'marketing', difficulty: 'medium', xp: 175 }, { title: 'Learn radio mixing', description: 'Master the art of seamless radio transitions', category: 'technical', difficulty: 'medium', xp: 125 }, { title: 'Build email list', description: 'Create newsletter for fan engagement', category: 'marketing', difficulty: 'easy', xp: 100, tool: 'email-template' }, { title: 'Master peak time sets', description: 'Learn to control energy during prime hours', category: 'performance', difficulty: 'hard', xp: 200 } ], advanced: [ { title: 'Master 4-deck mixing', description: 'Seamlessly blend multiple tracks simultaneously', category: 'technical', difficulty: 'hard', xp: 300 }, { title: 'Create touring strategy', description: 'Plan and execute multi-city performance tour', category: 'business', difficulty: 'hard', xp: 400 }, { title: 'Launch record label', description: 'Start your own music label and release catalog', category: 'business', difficulty: 'hard', xp: 500 }, { title: 'Master live production', description: 'Create tracks live during performances', category: 'technical', difficulty: 'hard', xp: 350 }, { title: 'Develop artist management', description: 'Build team of agents, managers, and promoters', category: 'business', difficulty: 'hard', xp: 300 }, { title: 'Create signature sound', description: 'Develop unique style recognized industry-wide', category: 'performance', difficulty: 'hard', xp: 400 }, { title: 'Master festival headlining', description: 'Learn to command main stage performances', category: 'performance', difficulty: 'hard', xp: 500 }, { title: 'Build international network', description: 'Connect with global promoters and venues', category: 'networking', difficulty: 'hard', xp: 350, tool: 'email-template' }, { title: 'Create masterclass content', description: 'Teach advanced techniques to other DJs', category: 'marketing', difficulty: 'medium', xp: 250 }, { title: 'Master brand partnerships', description: 'Secure major sponsorships and endorsements', category: 'business', difficulty: 'hard', xp: 400 }, { title: 'Learn advanced production', description: 'Master professional studio techniques', category: 'technical', difficulty: 'hard', xp: 350 }, { title: 'Create viral content', description: 'Develop content strategy for massive reach', category: 'marketing', difficulty: 'hard', xp: 300 }, { title: 'Master A&R skills', description: 'Learn to scout and develop new talent', category: 'business', difficulty: 'medium', xp: 200 }, { title: 'Create immersive experiences', description: 'Design multi-sensory performance concepts', category: 'performance', difficulty: 'hard', xp: 400 }, { title: 'Master technology integration', description: 'Use AI and advanced tech in performances', category: 'technical', difficulty: 'hard', xp: 350 }, { title: 'Build media presence', description: 'Secure interviews and media coverage', category: 'marketing', difficulty: 'medium', xp: 200 }, { title: 'Create educational platform', description: 'Launch online DJ education business', category: 'business', difficulty: 'hard', xp: 450 }, { title: 'Master genre innovation', description: 'Pioneer new musical styles and trends', category: 'performance', difficulty: 'hard', xp: 500 }, { title: 'Build venue partnerships', description: 'Secure residencies at top-tier venues', category: 'networking', difficulty: 'hard', xp: 350 }, { title: 'Create documentary content', description: 'Produce behind-the-scenes documentary', category: 'marketing', difficulty: 'hard', xp: 300 }, { title: 'Master cross-cultural mixing', description: 'Blend music from different cultures expertly', category: 'technical', difficulty: 'medium', xp: 250 }, { title: 'Launch DJ academy', description: 'Create comprehensive DJ education program', category: 'business', difficulty: 'hard', xp: 500 }, { title: 'Master crowd psychology', description: 'Control massive crowds with precision', category: 'performance', difficulty: 'hard', xp: 400 }, { title: 'Create industry connections', description: 'Build relationships with music industry leaders', category: 'networking', difficulty: 'hard', xp: 350 }, { title: 'Master live streaming', description: 'Create professional broadcast-quality streams', category: 'technical', difficulty: 'medium', xp: 200 }, { title: 'Develop artist collective', description: 'Build and manage group of performing artists', category: 'business', difficulty: 'hard', xp: 400 }, { title: 'Create signature events', description: 'Launch branded event series and festivals', category: 'business', difficulty: 'hard', xp: 500 }, { title: 'Master equipment innovation', description: 'Collaborate on new DJ technology development', category: 'technical', difficulty: 'hard', xp: 350 }, { title: 'Build legacy brand', description: 'Create lasting impact on DJ culture', category: 'marketing', difficulty: 'hard', xp: 500 }, { title: 'Master mentorship', description: 'Guide next generation of DJ talent', category: 'networking', difficulty: 'medium', xp: 250 } ] } const templates = missionTemplates[djLevel as keyof typeof missionTemplates] || missionTemplates.beginner const generatedMissions: DJPlanMission[] = templates.map((template, index) => ({ id: `mission-${index + 1}`, title: template.title, description: template.description, day: Math.floor(index * 3) + 1, // Spread over 90 days week: Math.floor(index / 2.5) + 1, // Roughly 2-3 missions per week difficulty: template.difficulty as 'easy' | 'medium' | 'hard', category: template.category as any, xp: template.xp, completed: false })) setMissions(generatedMissions) setLoading(false) } const loadProgress = async () => { if (!userId) return try { const { data } = await supabase .from('dj_plan_progress') .select('mission_id, completed_at') .eq('user_id', userId) if (data) { const completed = new Set(data.map(item => item.mission_id)) setCompletedMissions(completed) const xp = missions .filter(mission => completed.has(mission.id)) .reduce((total, mission) => total + mission.xp, 0) setTotalXP(xp) } } catch (error) { console.error('Error loading progress:', error) } } const completeMission = async (missionId: string) => { if (!userId) return try { await supabase .from('dj_plan_progress') .upsert({ user_id: userId, mission_id: missionId, completed_at: new Date().toISOString() }) setCompletedMissions(prev => new Set([...prev, missionId])) const mission = missions.find(m => m.id === missionId) if (mission) { setTotalXP(prev => prev + mission.xp) } } catch (error) { console.error('Error completing mission:', error) } } const getWeekMissions = (week: number) => { return missions.filter(mission => mission.week === week) } const getCompletionRate = () => { if (missions.length === 0) return 0 return (completedMissions.size / missions.length) * 100 } const getCurrentDay = () => { return Math.floor(Date.now() / (1000 * 60 * 60 * 24)) % 90 + 1 } if (loading) { return ( <div className="flex items-center justify-center min-h-96"> <div className="text-xl text-gray-600">Loading your personalized plan...</div> </div> ) } return ( <div className="space-y-8"> {/* Header with Level and Progress */} <GlassContainer className="p-8"> <div className="flex items-center justify-between mb-6"> <div className="flex items-center space-x-4"> <div className={`w-16 h-16 rounded-full bg-gradient-to-r ${levelInfo.color} flex items-center justify-center text-2xl`}> {levelInfo.icon} </div> <div> <h2 className="text-2xl font-bold text-gray-900">{levelInfo.title}</h2> <p className="text-gray-600">{levelInfo.description}</p> </div> </div> <div className="text-right"> <div className="text-3xl font-bold text-gray-900">{totalXP.toLocaleString()}</div> <div className="text-sm text-gray-600">Total XP</div> </div> </div> <div className="grid grid-cols-1 md:grid-cols-3 gap-6"> <div className="text-center"> <div className="text-2xl font-bold text-gray-900">{completedMissions.size}</div> <div className="text-sm text-gray-600">Missions Completed</div> </div> <div className="text-center"> <div className="text-2xl font-bold text-gray-900">{getCurrentDay()}</div> <div className="text-sm text-gray-600">Current Day</div> </div> <div className="text-center"> <div className="text-2xl font-bold text-gray-900">{getCompletionRate().toFixed(1)}%</div> <div className="text-sm text-gray-600">Progress</div> </div> </div> <div className="mt-6"> <ProgressBar progress={getCompletionRate()} className="h-3"showValue={false} /> </div> </GlassContainer> {/* Week Navigation */} <div className="flex space-x-2 overflow-x-auto pb-2"> {Array.from({ length: 13 }, (_, i) => i + 1).map(week => ( <Button key={week} variant={currentWeek === week ?"default":"outline"} size="sm"onClick={() => setCurrentWeek(week)} className="whitespace-nowrap"> Week {week} </Button> ))} </div> {/* Mission List for Current Week */} <div className="space-y-4"> <h3 className="text-xl font-semibold text-gray-900 flex items-center"> <Calendar className="w-5 h-5 mr-2"/> Week {currentWeek} Missions </h3> <div className="grid gap-4"> {getWeekMissions(currentWeek).map(mission => ( <motion.div key={mission.id} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="group"> <GlassContainer className={`p-6 transition-all duration-300 ${ completedMissions.has(mission.id) ? 'bg-green-50 border-green-200' : 'hover:shadow-lg' }`}> <div className="flex items-start justify-between"> <div className="flex items-start space-x-4 flex-1"> <button onClick={() => completeMission(mission.id)} className="mt-1 transition-colors duration-200"disabled={completedMissions.has(mission.id)} > {completedMissions.has(mission.id) ? ( <CheckCircle className="w-6 h-6 text-green-500"/> ) : ( <Circle className="w-6 h-6 text-gray-400 hover:text-blue-500"/> )} </button> <div className="flex-1"> <div className="flex items-center space-x-3 mb-2"> <h4 className={`font-semibold ${ completedMissions.has(mission.id) ? 'text-green-700 line-through' : 'text-gray-900' }`}> {mission.title} </h4> <Badge className={`${categoryColors[mission.category]} text-xs`}> <span className="flex items-center space-x-1"> {categoryIcons[mission.category]} <span className="capitalize">{mission.category}</span> </span> </Badge> <Badge variant={mission.difficulty === 'easy' ? 'secondary' : mission.difficulty === 'medium' ? 'default' : 'outline'} className="text-xs"> {mission.difficulty} </Badge> </div> <p className="text-gray-600 mb-3">{mission.description}</p> <div className="flex items-center justify-between"> <div className="flex items-center space-x-4 text-sm text-gray-500"> <span className="flex items-center"> <Target className="w-4 h-4 mr-1"/> Day {mission.day} </span> <span className="flex items-center"> <Award className="w-4 h-4 mr-1"/> {mission.xp} XP </span> </div> {mission.tool && ( <Button size="sm"variant="outline"onClick={() => setSelectedTool({ type: mission.tool!, mission })} className="bg-violet-500/10 border-violet-500/30 hover:bg-violet-500/20 text-violet-400 hover:text-violet-300"> <Wrench className="w-4 h-4 mr-2"/> {mission.tool === 'email-template' && 'Email Tool'} {mission.tool === 'ai-profile-analysis' && 'AI Analysis'} {mission.tool === 'presskit-builder' && 'Press Kit'} {mission.tool === 'contact-finder' && 'Contacts'} </Button> )} </div> </div> </div> </div> </GlassContainer> </motion.div> ))} </div> </div> {/* Animated Roadmap */} <DJRoadmap completedMissions={completedMissions} totalMissions={missions.length} djLevel={djLevel} totalXP={totalXP} /> {/* Tool Modals */} {selectedTool && ( <Modal isOpen={true} onClose={() => setSelectedTool(null)} title={`${selectedTool.mission.title} - Tool`} > {selectedTool.type === 'email-template' && ( <EmailTemplateBlock onComplete={() => setSelectedTool(null)} contacts={[]} region={{ country: 'France', city: 'Paris' }} /> )} {selectedTool.type === 'ai-profile-analysis' && ( <AIProfileAnalysis /> )} {selectedTool.type === 'presskit-builder' && ( <PresskitBuilder onComplete={() => setSelectedTool(null)} /> )} {selectedTool.type === 'contact-finder' && ( <ContactFinderTool onComplete={() => setSelectedTool(null)} /> )} </Modal> )} </div> ) } 